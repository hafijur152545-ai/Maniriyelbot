<!DOCTYPE html>
<html lang="bn">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Telegram Mini App</title>

<!-- ===== Monetag ===== -->
<script src='//libtl.com/sdk.js' data-zone='10390731' data-sdk='show_10390731'></script>

<!-- ===== Adexora ===== -->
<script src="https://adexora.com/cdn/ads.js?id=1551"></script>

<!-- ===== Telegram SDK ===== -->
<script src="https://telegram.org/js/telegram-web-app.js"></script>

<style>
body{
  margin:0;
  font-family:Segoe UI,sans-serif;
  background:#f2f4ff;
  padding-bottom:120px;
}
.header{
  background:linear-gradient(135deg,#6d5dfc,#8f9bff);
  color:#fff;
  padding:20px;
  border-radius:0 0 25px 25px;
}
.card{
  background:#fff;
  margin:15px;
  padding:20px;
  border-radius:20px;
  box-shadow:0 10px 25px rgba(0,0,0,.1);
}
.balance{
  font-size:36px;
  font-weight:700;
}
.btn{
  width:100%;
  padding:14px;
  margin-top:10px;
  border:none;
  border-radius:14px;
  background:#2f3437;
  color:#fff;
  font-size:16px;
}
.nav{
  position:fixed;
  bottom:10px;
  left:10px;
  right:10px;
  background:#2f3437;
  border-radius:20px;
  padding:12px;
  display:flex;
  justify-content:space-around;
  color:#bbb;
}
.nav span{font-size:22px}
.active{color:#fff}
</style>
</head>

<body>

<div class="header">
  <h2>ğŸ’° Earn Money Bot</h2>
  <small id="userInfo">User</small>
</div>

<div class="card">
  <div class="balance" id="balance">0.00 à§³</div>
  <small>Total Balance</small>
</div>

<div class="card">
  <button class="btn" onclick="watchMonetag()">ğŸ“º Watch Ad (Monetag +0.7à§³)</button>
  <button class="btn" onclick="watchAdexora()">ğŸ¥ Watch Ad (Adexora +0.7à§³)</button>
  <button class="btn" onclick="withdraw()">ğŸ’¸ Withdraw</button>
  <button class="btn" onclick="referral()">ğŸ‘¥ Referral</button>
</div>

<div class="nav">
  <span class="active">ğŸ </span>
  <span>ğŸ¬</span>
  <span>ğŸ’¸</span>
  <span>ğŸ§¾</span>
</div>

<script>
/* ===== CHANGE ONLY THESE ===== */
const BOT_TOKEN = "YOUR_BOT_TOKEN";
const ADMIN_ID = "YOUR_ADMIN_ID";
/* ============================ */

const MONETAG_REWARD = 0.7;
const ADEXORA_REWARD = 0.7;

const tg = window.Telegram.WebApp;
tg.expand();

let balance = Number(localStorage.getItem("balance") || 0);
updateBalance();

if (tg.initDataUnsafe.user){
  document.getElementById("userInfo").innerText =
    tg.initDataUnsafe.user.first_name + " | ID: " + tg.initDataUnsafe.user.id;
}

function updateBalance(){
  document.getElementById("balance").innerText = balance.toFixed(2) + " à§³";
}

/* ===== Monetag ===== */
function watchMonetag(){
  if (typeof window.show_10390731 !== "function"){
    alert("Monetag ad not ready");
    return;
  }

  window.show_10390731().then(()=>{
    balance += MONETAG_REWARD;
    localStorage.setItem("balance", balance);
    updateBalance();
  });
}

/* ===== Adexora ===== */
function watchAdexora(){
  if (typeof window.showAdexora !== "function"){
    alert("Adexora ad not ready");
    return;
  }

  window.showAdexora()
    .then(()=>{
      balance += ADEXORA_REWARD;
      localStorage.setItem("balance", balance);
      updateBalance();
    })
    .catch(()=>{
      alert("Adexora ad failed");
    });
}

/* ===== Withdraw ===== */
function withdraw(){
  if (balance < 20){
    alert("Minimum withdraw 20à§³");
    return;
  }

  const msg =
    `Withdraw Request\nUser ID: ${tg.initDataUnsafe.user.id}\nAmount: ${balance}à§³`;

  fetch(
    `https://api.telegram.org/bot${BOT_TOKEN}/sendMessage?chat_id=${ADMIN_ID}&text=` +
    encodeURIComponent(msg)
  );

  balance = 0;
  localStorage.setItem("balance", 0);
  updateBalance();
  alert("Withdraw request sent");
}

/* ===== Referral ===== */
function referral(){
  const link = `https://t.me/maniriyel_bot?start=${tg.initDataUnsafe.user.id}`;
  navigator.clipboard.writeText(link);
  alert("Referral link copied");
}
</script>

</body>
</html>
