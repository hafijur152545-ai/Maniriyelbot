<!DOCTYPE html>
<html lang="bn">
<head>
<meta charset="UTF-8">
<title>Earn Money Bot</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script src="//libtl.com/sdk.js" data-zone="10390731" data-sdk="show_10390731"></script>
<script src="https://adexora.com/cdn/ads.js?id=1551"></script>

<style>
body{margin:0;font-family:Arial;background:#f6f7fb}
.header{background:#ff4fa3;color:#fff;padding:16px;text-align:center;font-size:20px}
.card{background:#fff;margin:12px;padding:14px;border-radius:12px}
.balance{font-size:28px;font-weight:bold;text-align:center}
.btn{width:100%;padding:14px;border:none;border-radius:10px;font-size:16px;color:#fff;margin-top:10px}
.btn-m{background:#3f5bd8}
.btn-w{background:#28a745}
.nav{position:fixed;bottom:0;left:0;width:100%;display:flex;background:#ff4fa3}
.nav button{flex:1;padding:12px;border:none;background:none;color:#fff}
.hide{display:none}
.toast{display:none;position:fixed;top:15px;left:50%;transform:translateX(-50%);
background:#d32f2f;color:#fff;padding:10px 18px;border-radius:20px}
</style>
</head>

<body>

<div class="toast" id="toast"></div>

<div class="header">üí∞ Earn Money Bot</div>

<div class="card">
  <div class="balance" id="bal">0.00 ‡ß≥</div>
  <div style="text-align:center">Total Balance</div>
</div>

<div class="card">
  <button class="btn btn-m" onclick="watchAd()">üì∫ Watch Ad</button>
</div>

<div class="card">
  <input id="number" placeholder="Bkash / Nagad Number">
  <select id="amount">
    <option value="50">50‡ß≥</option>
    <option value="100">100‡ß≥</option>
    <option value="200">200‡ß≥</option>
  </select>
  <button class="btn btn-w" onclick="withdraw()">Withdraw</button>
</div>

<div class="nav">
  <button onclick="location.reload()">Home</button>
</div>

<!-- üî• FIREBASE + BOT LOGIC -->
<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
import { getDatabase, ref, get, set, update, push, onValue }
from "https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js";

/* üî• FIREBASE CONFIG */
const firebaseConfig={
 apiKey:"AIzaSyDBSUP7tfK5IlvEEoDm3qwkMhH6MU8Q3jE",
 authDomain:"maniriyelbot0.firebaseapp.com",
 databaseURL:"https://maniriyelbot0-default-rtdb.asia-southeast1.firebasedatabase.app",
 projectId:"maniriyelbot0",
 appId:"1:386824179846:web:e6eadd434a3151e48e0107"
};

const app=initializeApp(firebaseConfig);
const db=getDatabase(app);

/* üî• TELEGRAM USER */
const uid = Telegram.WebApp.initDataUnsafe.user.id.toString();
const userRef = ref(db,"users/"+uid);

/* üî• LOAD USER */
onValue(userRef,(snap)=>{
 if(!snap.exists()){
   set(userRef,{balance:0,banned:false});
   bal.innerText="0.00 ‡ß≥";
 }else{
   if(snap.val().banned){
     alert("‚ùå You are banned");
     throw "";
   }
   bal.innerText=(snap.val().balance||0).toFixed(2)+" ‡ß≥";
 }
});

/* üî• WATCH AD */
window.watchAd=()=>{
 show_10390731().then(()=>{
   setTimeout(async()=>{
     const s=await get(userRef);
     const bal=(s.val().balance||0)+0.5;
     update(userRef,{balance:bal});
   },15000);
 });
};

/* üî• WITHDRAW */
window.withdraw=async()=>{
 const amt=Number(amount.value);
 const num=number.value.trim();
 if(!num) return toast("‡¶®‡¶æ‡¶Æ‡ßç‡¶¨‡¶æ‡¶∞ ‡¶¶‡¶ø‡¶®");
 const s=await get(userRef);
 if(s.val().balance < amt) return toast("‡¶¨‡ßç‡¶Ø‡¶æ‡¶≤‡ßá‡¶®‡ßç‡¶∏ ‡¶®‡¶æ‡¶á");
 update(userRef,{balance:s.val().balance-amt});
 push(ref(db,"withdraws"),{
   uid,amount:amt,number:num,status:"pending",time:Date.now()
 });
 toast("‚úÖ Withdraw Submitted",true);
};

/* TOAST */
function toast(msg,ok=false){
 const t=document.getElementById("toast");
 t.innerText=msg;
 t.style.background=ok?"#2e7d32":"#d32f2f";
 t.style.display="block";
 setTimeout(()=>t.style.display="none",2500);
}
</script>

</body>
</html>
